@page
@model CampusLearn.Pages.Student.BookTutorModel
@{
    ViewData["Title"] = "Book Tutor";
}

@* BookTutor Page Styles *@
<link rel="stylesheet" href="~/css/booktutor.css" asp-append-version="true" />

<!-- TempData Messages -->
@if (TempData["Message"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle me-2"></i>
        @TempData["Message"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle me-2"></i>
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="mainContainer">
    <!-- Book a Session Heading -->
    <div class="headingSection">
        <div class="fullWidthColumn">
            <h1 class="mainHeading">Book a Session</h1>
        </div>
    </div>

    <!-- T&C Section -->
    <div class="tcSection">
        <div class="fullWidthColumn">
            <div class="card tcTextSection">
                <div class="card-header">
                    <h3 class="tcHeading">Terms and Conditions for booking a tutor</h3>
                </div>
                <div class="card-body">
                    <ul>
                        <li>All appointments with tutors must be scheduled a day ahead. We cannot organise a tutor for you at short notice.</li>
                        <li>All sessions are limited to 1 hour.</li>
                        <li>You must come prepared for the sessions.</li>
                        <li>You will be given some exercises to do in your sessions.</li>
                        <li>All online sessions via MS Teams are recorded.</li>
                        <li>All face-to-face sessions are held at the study room.</li>
                        <li>Respect the time and effort of your tutor.</li>
                        <li>You will be required to complete a tutor evaluation form.</li>
                    </ul>
                    <p class="card-text">
                        For any inquires, email: tutors@belgiumcampus.ac.za
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Form Section -->
    <div class="bookingFormContainer">
        <div class="fullWidthColumn">
            <div class="card bookingFormSection">
                <div class="card-header">
                    <h3 class="bookingFormHeading">Booking Form</h3>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data" id="BookTutorForm">
                        <!-- Hidden field to pass AvailabilityId -->
                        <input type="hidden" name="AvailabilityId" value="@Model.AvailabilityId" />
                        
                        <div class="formRow">
                            <div class="formFieldHalf">
                                <label for="studentName" class="fieldLabel">Student Name <small class="text-muted">(from your profile)</small></label>
                                <div class="input-control">
                                    <input type="text" class="inputField" id="studentName" name="studentName" 
                                           value="@Model.StudentName" readonly>
                                    <div class="error"></div>
                                </div>
                            </div>
                            <div class="formFieldHalf">
                                <label for="studentEmail" class="fieldLabel">Email Address <small class="text-muted">(from your profile)</small></label>
                                <div class="input-control">
                                    <input type="email" class="inputField" id="studentEmail" name="studentEmail" 
                                           value="@Model.StudentEmail" readonly>
                                    <div class="error"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="formRow">
                            <div class="formFieldHalf">
                                <label for="module" class="fieldLabel">Module <small class="text-muted">(from tutor availability)</small></label>
                                <div class="input-control">
                                    <input type="text" class="inputField" id="module" name="module" 
                                           value="@Model.Module" readonly>
                                    <div class="error"></div>
                                </div>
                            </div>
                            <div class="formFieldHalf">
                                <label for="preferredDate" class="fieldLabel">Preferred Date <small class="text-muted">(from tutor availability)</small></label>
                                <div class="input-control">
                                    <input type="date" class="inputField" id="preferredDate" name="preferredDate" 
                                           value="@Model.Availability?.Available.ToString("yyyy-MM-dd")" readonly>
                                    <div class="error"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="formRow">
                            <div class="formFieldHalf">
                                <label for="preferredTime" class="fieldLabel">Preferred Time <small class="text-muted">(from tutor availability)</small></label>
                                <div class="input-control">
                                    <input type="text" class="inputField" id="preferredTime" name="preferredTime" 
                                           value="@Model.Availability?.Available.ToString("HH:mm")" readonly>
                                    <div class="error"></div>
                                </div>
                            </div>
                            <div class="formFieldHalf">
                                <label for="sessionDuration" class="fieldLabel">Session Duration</label>
                                <div class="input-control">
                                    <select class="selectField" id="sessionDuration" name="sessionDuration">
                                        <option value="">Select duration</option>
                                        <option value="15">15 minutes</option>
                                        <option value="30">30 minutes</option>
                                        <option value="45">45 minutes</option>
                                        <option value="60">1 hour</option>
                                    </select>
                                    <div class="error"></div>
                                </div>
                            </div>
                        </div>
                        <div class="formRow">
                            <div class="formFieldHalf">
                                <label for="location" class="fieldLabel">Location</label>
                                <div class="input-control">
                                    <select class="selectField" id="location" name="location">
                                        <option value="">Select Location</option>
                                        <option value="Online">Online</option>
                                        <option value="Kempton Park Campus Library">Kempton Park Campus Library</option>
                                        <option value="Pretoria Campus Library">Pretoria Campus Library</option>
                                        <option value="Stellenbosch Campus Library">Stellenbosch Campus Library</option>
                                    </select>
                                    <div class="error"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="notesFieldContainer">
                            <label for="BookingSummary" class="fieldLabel">Booking Summary</label>
                            <div class="input-control">
                                <textarea class="textareaField" id="BookingSummary" name="BookingSummary" rows="4" placeholder="Please provide any additional information about your tutoring needs..."></textarea>
                                <div class="error"></div>
                            </div>
                        </div>
                        
                        <div class="fileUploadContainer">
                            <label for="studentResource1" class="fieldLabel">Upload Resources</label>
                            <div class="fileUploadWrapper">
                                <input type="file" class="fileInput" id="studentResource1" name="studentResource1" multiple accept=".pdf,.ppt,.pptx,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif">
                                <div class="fileUploadDisplay">
                                    <span class="fileUploadText">Click to select files or drag and drop</span>
                                    <span class="fileUploadHint">Supported formats: PDF, PowerPoint, Word, Images, Text files</span>
                                </div>
                            </div>
                            <div class="selectedFilesContainer" id="selectedFilesContainer1" style="display: none;">
                                <h6 class="selectedFilesTitle">Selected Files:</h6>
                                <ul class="selectedFilesList" id="selectedFilesList1"></ul>
                            </div>
                        </div>
                        <div class="fileUploadContainer">
                            <label for="studentResource2" class="fieldLabel">Upload Resources</label>
                            <div class="fileUploadWrapper">
                                <input type="file" class="fileInput" id="studentResource2" name="studentResource2" multiple accept=".pdf,.ppt,.pptx,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif">
                                <div class="fileUploadDisplay">
                                    <span class="fileUploadText">Click to select files or drag and drop</span>
                                    <span class="fileUploadHint">Supported formats: PDF, PowerPoint, Word, Images, Text files</span>
                                </div>
                            </div>
                            <div class="selectedFilesContainer" id="selectedFilesContainer2" style="display: none;">
                                <h6 class="selectedFilesTitle">Selected Files:</h6>
                                <ul class="selectedFilesList" id="selectedFilesList2"></ul>
                            </div>
                        </div>
                        
                        <div class="termsAgreementContainer">
                            <div class="input-control">
                                <input type="checkbox" class="termsCheckbox" id="agreeTerms" name="agreeTerms" value="true">
                                <label class="termsAgreementLabel" for="agreeTerms">
                                    I agree with the terms and conditions
                                </label>
                                <div class="error"></div>
                            </div>
                        </div>
                        
                        <div class="submitButtonContainer">
                            <button type="submit" class="submitButton">Book Session</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/booktutor.js" asp-append-version="true"></script>
}

